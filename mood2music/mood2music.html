<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>document</title>

    <link href="fontawesome1/css/all.min.css" rel="stylesheet" />
    <link href="css/moneyy.css" rel="stylesheet" />
  </head>
  <body>
    <nav class="header-name align-box-center">
      <h3>thismoodthatmusic</h3>
    </nav>

    <div class="header-title align-box-center">
      <h1>"No cap, these tunes are about to hit different for you."</h1>
      <p class="font-menu-sm">"Whatâ€™s the mood?"</p>
      <div>
        <select name="genre" id="">
          <option value="">Jazz</option>
          <option value="">Hiphop</option>
          <option value="">ROCK</option>
          <option value="">POP</option>
        </select>
      </div>
    </div>

    <div class="main-menu align-box-center">
      <div>
        <button
          class="bt-main"
          data-mood="Beaminâ€™"
          data-url="OTHER/beamin.html"
        >
          <span>ğŸ˜ Beaminâ€™</span>
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Reflectinâ€™"
          data-url="OTHER/reflectin.html"
        >
          ğŸ¤” Reflectinâ€™
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Gloominâ€™"
          data-url="OTHER/gloomin.html"
        >
          <span>ğŸ˜¢ Gloominâ€™</span>
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Crackinâ€™"
          data-url="OTHER/crackin.html"
        >
          <span>ğŸ¤£ Crackinâ€™</span>
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Blueinâ€™"
          data-url="OTHER/bluein.html"
        >
          <span>ğŸ˜¶ Blueinâ€™</span>
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Dreaminâ€™"
          data-url="OTHER/dreamin.html"
        >
          <span>ğŸ¤© Dreaminâ€™</span>
        </button>
      </div>
      <div>
        <button class="bt-main" data-mood="Vibinâ€™" data-url="OTHER/vibin.html">
          <span>
            <img
              src="https://cdn3.emoji.gg/emojis/6124-chillguy.png"
              width="22px"
              height="22px"
              alt="ChillGuy"
            />
            Vibinâ€™
          </span>
        </button>
      </div>
      <div>
        <button class="bt-main" data-mood="Lovinâ€™" data-url="OTHER/lovin.html">
          <span>ğŸ˜ Lovinâ€™</span>
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Freakinâ€™"
          data-url="OTHER/freakin.html"
        >
          <span>ğŸ¤¨ Freakinâ€™</span>
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Horninâ€™"
          data-url="OTHER/hornin.html"
        >
          <span>ğŸ¤¤ Horninâ€™</span>
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Snoozinâ€™"
          data-url="OTHER/snoozin.html"
        >
          <span>ğŸ¥± Snoozinâ€™</span>
        </button>
      </div>
      <div>
        <button class="bt-main" data-mood="Raginâ€™" data-url="OTHER/ragin.html">
          <span>ğŸ”¥ Raginâ€™</span>
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Spookinâ€™"
          data-url="OTHER/spookin.html"
        >
          <span>ğŸ˜¨ Spookinâ€™</span>
        </button>
      </div>
      <div>
        <button class="bt-main" data-mood="Empty.." data-url="OTHER/empty.html">
          <span>ğŸ˜” Empty..</span>
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Stressinâ€™"
          data-url="OTHER/stressin.html"
        >
          <span>ğŸ˜¬ Stressin</span>
        </button>
      </div>
      <div>
        <button
          class="bt-main"
          data-mood="Deepinâ€™"
          data-url="OTHER/deepin.html"
        >
          <span>ğŸ¤“ Deepinâ€™</span>
        </button>
      </div>
    </div>

    <!-- OpenAI API í˜¸ì¶œ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
      // ì´ì œëŠ” OpenAI ì„œë²„ ëŒ€ì‹ , "Vercel API"ë¥¼ í˜¸ì¶œí•  ì˜ˆì •!
      const apiUrl =
        "https://[ë‚´-Vercel-í”„ë¡œì íŠ¸-ì£¼ì†Œ].vercel.app/api/recommend";

      const buttons = document.querySelectorAll(".bt-main");
      buttons.forEach((button) => {
        button.addEventListener("click", async () => {
          const mood = button.getAttribute("data-mood") || "Default Mood";
          const url = button.getAttribute("data-url");

          if (!url) {
            alert("URLì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!");
            return;
          }

          try {
            // fetch í•  ë•Œ, ë” ì´ìƒ apiKeyë¥¼ ë³´ë‚´ì§€ ì•ŠìŒ!
            const response = await fetch(apiUrl, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ mood }),
            });

            const data = await response.json();
            // OpenAI ì‘ë‹µ ë‚´ìš©
            const recommendations = data.choices?.[0]?.message?.content || "";

            window.location.href = `${url}?recommendations=${encodeURIComponent(
              recommendations
            )}`;
          } catch (error) {
            console.error(error);
            alert("ë…¸ë˜ ì¶”ì²œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
          }
        });
      });
    </script>
  </body>
</html>
